<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>X11workbench Toolkit: Memory sub-allocator for high performance dynamic memory management</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">X11workbench Toolkit
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__sub__alloc.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Memory sub-allocator for high performance dynamic memory management</div>  </div>
</div><!--header-->
<div class="contents">

<p>Generic utility functions for allocating and manipulated memory buffers.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga8ee962cea8e2f0cb52d1cab9057ffe6c"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sub__alloc.html#ga8ee962cea8e2f0cb52d1cab9057ffe6c">WBAlloc</a> (int nSize)</td></tr>
<tr class="memdesc:ga8ee962cea8e2f0cb52d1cab9057ffe6c"><td class="mdescLeft">&#160;</td><td class="mdescRight">High performance memory sub-allocator 'allocate'.  <a href="#ga8ee962cea8e2f0cb52d1cab9057ffe6c">More...</a><br /></td></tr>
<tr class="separator:ga8ee962cea8e2f0cb52d1cab9057ffe6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaebf9d7c0cd9aa525a93d0c5cc5376a1c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sub__alloc.html#gaebf9d7c0cd9aa525a93d0c5cc5376a1c">WBFree</a> (void *pBuf)</td></tr>
<tr class="memdesc:gaebf9d7c0cd9aa525a93d0c5cc5376a1c"><td class="mdescLeft">&#160;</td><td class="mdescRight">High performance memory sub-allocator 'free'.  <a href="#gaebf9d7c0cd9aa525a93d0c5cc5376a1c">More...</a><br /></td></tr>
<tr class="separator:gaebf9d7c0cd9aa525a93d0c5cc5376a1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga672494d7740ea38720033a515a7a4f88"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sub__alloc.html#ga672494d7740ea38720033a515a7a4f88">WBAllocUsableSize</a> (void *pBuf)</td></tr>
<tr class="memdesc:ga672494d7740ea38720033a515a7a4f88"><td class="mdescLeft">&#160;</td><td class="mdescRight">High performance memory sub-allocator, similar to 'malloc_usable_size'.  <a href="#ga672494d7740ea38720033a515a7a4f88">More...</a><br /></td></tr>
<tr class="separator:ga672494d7740ea38720033a515a7a4f88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf2228924f510dc4b6f6b86b44c0e4e11"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sub__alloc.html#gaf2228924f510dc4b6f6b86b44c0e4e11">WBReAlloc</a> (void *pBuf, int nNewSize)</td></tr>
<tr class="memdesc:gaf2228924f510dc4b6f6b86b44c0e4e11"><td class="mdescLeft">&#160;</td><td class="mdescRight">High performance memory sub-allocator 're-allocate'.  <a href="#gaf2228924f510dc4b6f6b86b44c0e4e11">More...</a><br /></td></tr>
<tr class="separator:gaf2228924f510dc4b6f6b86b44c0e4e11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7941a53075e5f5ce27eba95c524aae5f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sub__alloc.html#ga7941a53075e5f5ce27eba95c524aae5f">WBSubAllocTrashMasher</a> (void)</td></tr>
<tr class="memdesc:ga7941a53075e5f5ce27eba95c524aae5f"><td class="mdescLeft">&#160;</td><td class="mdescRight">High performance memory sub-allocator 'trash masher' - call periodically to minimize wasted memory.  <a href="#ga7941a53075e5f5ce27eba95c524aae5f">More...</a><br /></td></tr>
<tr class="separator:ga7941a53075e5f5ce27eba95c524aae5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Generic utility functions for allocating and manipulated memory buffers. </p>
<p>The purpose of the high performance sub-allocator is to minimize memory fragmentation and related performance issues caused by 'malloc' and the related 'new' operator in C++. In some implementations, they may simply be an alias for the 'malloc' functions. In other implementations they can manage sub allocation via the OS. In still others, they can implement a complex but efficient memory sub-allocation scheme using virtual memory. Abstraction is the key, along with performance. The 'edit text' utilities are designed for hyper-efficient editing of extremely large text files.<br />
Since I have seen 'malloc a boatload of tiny memory fragments' cause PERFORMANCE PROBLEMS in the past, I want to avoid that. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga8ee962cea8e2f0cb52d1cab9057ffe6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8ee962cea8e2f0cb52d1cab9057ffe6c">&#9670;&nbsp;</a></span>WBAlloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* WBAlloc </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nSize</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>High performance memory sub-allocator 'allocate'. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">nSize</td><td>The length of memory being requested </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the allocated buffer, always aligned on a 'pointer size' boundary. Do NOT overrun the buffer!</dd></dl>
<p>Header File: <a class="el" href="platform__helper_8h.html" title="Definition file for platform-specific utility functions. ">platform_helper.h</a> </p>

<p class="definition">Definition at line <a class="el" href="platform__helper_8c_source.html#l00881">881</a> of file <a class="el" href="platform__helper_8c_source.html">platform_helper.c</a>.</p>

</div>
</div>
<a id="ga672494d7740ea38720033a515a7a4f88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga672494d7740ea38720033a515a7a4f88">&#9670;&nbsp;</a></span>WBAllocUsableSize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int WBAllocUsableSize </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pBuf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>High performance memory sub-allocator, similar to 'malloc_usable_size'. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pBuf</td><td>A pointer to the previously sub-allocated memory </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The usable size of the allocated memory.</dd></dl>
<p>Use this function to determine how big a memory block REALLY is, particularly if 'malloc_usable_size' is supported. The sub-allocators use power-of-two allocation sizes in order to minimize the need to re-allocate blocks of memory. The assumption is that memory re-allocation is likely. To minimize the need to flip pointers around all of the time, and copy blocks of memory from one place to another via re-allocation, you can use this function to determine how much memory is REALLY available in the memory block. (this function is used internally within <a class="el" href="group__sub__alloc.html#gaf2228924f510dc4b6f6b86b44c0e4e11" title="High performance memory sub-allocator &#39;re-allocate&#39;. ">WBReAlloc()</a>, and is generally 'advisory' when used for other purposes).</p>
<p>Header File: <a class="el" href="platform__helper_8h.html" title="Definition file for platform-specific utility functions. ">platform_helper.h</a> </p>

<p class="definition">Definition at line <a class="el" href="platform__helper_8c_source.html#l00942">942</a> of file <a class="el" href="platform__helper_8c_source.html">platform_helper.c</a>.</p>

</div>
</div>
<a id="gaebf9d7c0cd9aa525a93d0c5cc5376a1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaebf9d7c0cd9aa525a93d0c5cc5376a1c">&#9670;&nbsp;</a></span>WBFree()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WBFree </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pBuf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>High performance memory sub-allocator 'free'. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pBuf</td><td>A pointer to the previously sub-allocated memory </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void</dd></dl>
<p>Header File: <a class="el" href="platform__helper_8h.html" title="Definition file for platform-specific utility functions. ">platform_helper.h</a> </p>

<p class="definition">Definition at line <a class="el" href="platform__helper_8c_source.html#l00965">965</a> of file <a class="el" href="platform__helper_8c_source.html">platform_helper.c</a>.</p>

</div>
</div>
<a id="gaf2228924f510dc4b6f6b86b44c0e4e11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf2228924f510dc4b6f6b86b44c0e4e11">&#9670;&nbsp;</a></span>WBReAlloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* WBReAlloc </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pBuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nNewSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>High performance memory sub-allocator 're-allocate'. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pBuf</td><td>A pointer to the previously sub-allocated memory </td></tr>
    <tr><td class="paramname">nNewSize</td><td>The desired 'new' size of the memory block </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the new allocated memory block, or NULL on error. If the return value is NOT NULL, the previous pointer becomes invalid.</dd></dl>
<p>Header File: <a class="el" href="platform__helper_8h.html" title="Definition file for platform-specific utility functions. ">platform_helper.h</a> </p>

<p class="definition">Definition at line <a class="el" href="platform__helper_8c_source.html#l01006">1006</a> of file <a class="el" href="platform__helper_8c_source.html">platform_helper.c</a>.</p>

</div>
</div>
<a id="ga7941a53075e5f5ce27eba95c524aae5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7941a53075e5f5ce27eba95c524aae5f">&#9670;&nbsp;</a></span>WBSubAllocTrashMasher()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WBSubAllocTrashMasher </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>High performance memory sub-allocator 'trash masher' - call periodically to minimize wasted memory. </p>
<p>Sub-allocation sometimes leaves 'holes' in memory. This function is intended to minimize that, by freeing up blocks of allocated memory that are no longer in use. It is not the same as 'garbage collection', but it may have the same basic effect. Call this function within the main message loop in the main thread.</p>
<p>Header File: <a class="el" href="platform__helper_8h.html" title="Definition file for platform-specific utility functions. ">platform_helper.h</a> </p>

<p class="definition">Definition at line <a class="el" href="platform__helper_8c_source.html#l01099">1099</a> of file <a class="el" href="platform__helper_8c_source.html">platform_helper.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Feb 12 2018 11:51:47 for X11workbench Toolkit by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
